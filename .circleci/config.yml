 version: 2.1

 orbs:
  win: circleci/windows@2.2.0

 jobs:
   build:
     executor: win/default     
    
     steps:
        - checkout
        - run: dotnet build -c Release
        - run:
            name: Compress Artifacts
            command: Compress-Archive .\Release\net5.0\* .\SFMLRaycaster.zip
        - store_artifacts:
            path: .\SFMLRaycaster.zip
        - run:
            name: Upload to Github
            command: |
            curl 'https://api.github.com/repos/${CIRCLE_PROJECT_USERNAME}/${CIRCLE_PROJECT_REPONAME}/releases/:id/assets?access_token=${GITHUB_TOKEN}&name=${VERSION}' --header 'Content-Type: application/zip' --upload-file .\SFMLRaycaster.zip -X POST
