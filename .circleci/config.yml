 version: 2.1

 orbs:
  win: circleci/windows@2.2.0

 jobs:
   build:
     executor: win/default     
    
     steps:
        - checkout
        - run: dotnet build -c Release
        - run:
            name: Compress Artifacts
            command: Compress-Archive .\Release\net5.0\* .\SFMLRaycaster.zip
        - store_artifacts:
            path: .\SFMLRaycaster.zip
        - run:
            name: "Publish Release on Github"
            command: ghr -t ${GITHUB_TOKEN} -u ${CIRCLE_PROJECT_USERNAME} -r ${CIRCLE_PROJECT_REPONAME} -c ${CIRCLE_SHA1} -delete ${VERSION} .\SFMLRaycaster.zip